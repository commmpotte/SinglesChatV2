{"ast":null,"code":"var _jsxFileName = \"/Users/commmpotte/FrontEnd/React-task/react-task-2/src/components/SendMessage.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { Dexie } from 'dexie';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst db = new Dexie('chatApp');\ndb.version(1).stores({\n  chat: `++id, message, author`\n});\nconst {\n  chat\n} = db;\nconst getUsername = sessionStorage.getItem('username');\n\nfunction SendMessage() {\n  _s();\n\n  useEffect(() => {\n    chat.where('author').equals(getUsername).toArray().then(messages => {\n      const authorsArray = [];\n      messages.forEach(message => {\n        if (!authorsArray.includes(message.author)) {\n          authorsArray.push(message.author);\n        }\n      });\n    });\n  }, []);\n\n  const addMessage = async event => {\n    event.preventDefault();\n    const messageField = document.querySelector('#messageInput');\n    await chat.add({\n      message: messageField.value,\n      author: getUsername\n    });\n    messageField.value = '';\n  };\n\n  const [screenWidth, setScreenWidth] = useState(window.innerWidth);\n  useEffect(() => {\n    function handleResize() {\n      setScreenWidth(window.innerWidth);\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex w-100 align-items-center mt-2 mb-2\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-2 w-100\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"input-group mb-0 mw-100 text\",\n        onSubmit: addMessage,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"messageInput\",\n          type: \"text\",\n          className: \"form-control bg-white\",\n          placeholder: \"Write your message\",\n          rows: \"4\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), screenWidth > 768 ? /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-info\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-info d-flex\",\n          style: {\n            padding: '0.35rem'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            children: \"send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SendMessage, \"WFCbr5ptEK9brsOK50AWOFNpetU=\");\n\n_c = SendMessage;\nexport default SendMessage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SendMessage\");","map":{"version":3,"names":["React","useState","useEffect","Dexie","db","version","stores","chat","getUsername","sessionStorage","getItem","SendMessage","where","equals","toArray","then","messages","authorsArray","forEach","message","includes","author","push","addMessage","event","preventDefault","messageField","document","querySelector","add","value","screenWidth","setScreenWidth","window","innerWidth","handleResize","addEventListener","removeEventListener","padding"],"sources":["/Users/commmpotte/FrontEnd/React-task/react-task-2/src/components/SendMessage.jsx"],"sourcesContent":["import React from 'react'\nimport { useState, useEffect } from 'react'\nimport { Dexie } from 'dexie'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\n\nconst db = new Dexie('chatApp')\ndb.version(1).stores({\n  chat: `++id, message, author`,\n})\nconst { chat } = db\nconst getUsername = sessionStorage.getItem('username')\n\nfunction SendMessage() {\n\nuseEffect(() => {\n  chat\n    .where('author')\n    .equals(getUsername)\n    .toArray()\n    .then((messages) => {\n      const authorsArray = []\n\n      messages.forEach((message) => {\n        if (!authorsArray.includes(message.author)) {\n          authorsArray.push(message.author)\n        }\n      })\n    })\n}, [])\n\n  const addMessage = async (event) => {\n    event.preventDefault()\n    const messageField = document.querySelector('#messageInput')\n\n    await chat.add({\n      message: messageField.value,\n      author: getUsername,\n    })\n    messageField.value = ''\n  }\n\n  const [screenWidth, setScreenWidth] = useState(window.innerWidth)\n\n  useEffect(() => {\n    function handleResize() {\n      setScreenWidth(window.innerWidth)\n    }\n\n    window.addEventListener('resize', handleResize)\n\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n  return (\n    <div className=\"d-flex w-100 align-items-center mt-2 mb-2\">\n      <div className=\"m-2 w-100\">\n        <form className=\"input-group mb-0 mw-100 text\" onSubmit={addMessage}>\n          <input\n            id=\"messageInput\"\n            type=\"text\"\n            className=\"form-control bg-white\"\n            placeholder=\"Write your message\"\n            rows=\"4\"\n            required\n          />\n          {screenWidth > 768 ? (\n            <button type=\"submit\" className=\"btn btn-info\">\n              Send\n            </button>\n          ) : (\n            <button\n              type=\"submit\"\n              className=\"btn btn-info d-flex\"\n              style={{ padding: '0.35rem' }}\n            >\n              <span className=\"material-symbols-outlined\">send</span>\n            </button>\n          )}\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default SendMessage\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,KAAT,QAAsB,OAAtB;AACA,OAAO,sCAAP;;AAGA,MAAMC,EAAE,GAAG,IAAID,KAAJ,CAAU,SAAV,CAAX;AACAC,EAAE,CAACC,OAAH,CAAW,CAAX,EAAcC,MAAd,CAAqB;EACnBC,IAAI,EAAG;AADY,CAArB;AAGA,MAAM;EAAEA;AAAF,IAAWH,EAAjB;AACA,MAAMI,WAAW,GAAGC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAApB;;AAEA,SAASC,WAAT,GAAuB;EAAA;;EAEvBT,SAAS,CAAC,MAAM;IACdK,IAAI,CACDK,KADH,CACS,QADT,EAEGC,MAFH,CAEUL,WAFV,EAGGM,OAHH,GAIGC,IAJH,CAISC,QAAD,IAAc;MAClB,MAAMC,YAAY,GAAG,EAArB;MAEAD,QAAQ,CAACE,OAAT,CAAkBC,OAAD,IAAa;QAC5B,IAAI,CAACF,YAAY,CAACG,QAAb,CAAsBD,OAAO,CAACE,MAA9B,CAAL,EAA4C;UAC1CJ,YAAY,CAACK,IAAb,CAAkBH,OAAO,CAACE,MAA1B;QACD;MACF,CAJD;IAKD,CAZH;EAaD,CAdQ,EAcN,EAdM,CAAT;;EAgBE,MAAME,UAAU,GAAG,MAAOC,KAAP,IAAiB;IAClCA,KAAK,CAACC,cAAN;IACA,MAAMC,YAAY,GAAGC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB;IAEA,MAAMrB,IAAI,CAACsB,GAAL,CAAS;MACbV,OAAO,EAAEO,YAAY,CAACI,KADT;MAEbT,MAAM,EAAEb;IAFK,CAAT,CAAN;IAIAkB,YAAY,CAACI,KAAb,GAAqB,EAArB;EACD,CATD;;EAWA,MAAM,CAACC,WAAD,EAAcC,cAAd,IAAgC/B,QAAQ,CAACgC,MAAM,CAACC,UAAR,CAA9C;EAEAhC,SAAS,CAAC,MAAM;IACd,SAASiC,YAAT,GAAwB;MACtBH,cAAc,CAACC,MAAM,CAACC,UAAR,CAAd;IACD;;IAEDD,MAAM,CAACG,gBAAP,CAAwB,QAAxB,EAAkCD,YAAlC;IAEA,OAAO,MAAM;MACXF,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCF,YAArC;IACD,CAFD;EAGD,CAVQ,EAUN,EAVM,CAAT;EAWA,oBACE;IAAK,SAAS,EAAC,2CAAf;IAAA,uBACE;MAAK,SAAS,EAAC,WAAf;MAAA,uBACE;QAAM,SAAS,EAAC,8BAAhB;QAA+C,QAAQ,EAAEZ,UAAzD;QAAA,wBACE;UACE,EAAE,EAAC,cADL;UAEE,IAAI,EAAC,MAFP;UAGE,SAAS,EAAC,uBAHZ;UAIE,WAAW,EAAC,oBAJd;UAKE,IAAI,EAAC,GALP;UAME,QAAQ;QANV;UAAA;UAAA;UAAA;QAAA,QADF,EASGQ,WAAW,GAAG,GAAd,gBACC;UAAQ,IAAI,EAAC,QAAb;UAAsB,SAAS,EAAC,cAAhC;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADD,gBAKC;UACE,IAAI,EAAC,QADP;UAEE,SAAS,EAAC,qBAFZ;UAGE,KAAK,EAAE;YAAEO,OAAO,EAAE;UAAX,CAHT;UAAA,uBAKE;YAAM,SAAS,EAAC,2BAAhB;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QALF;UAAA;UAAA;UAAA;QAAA,QAdJ;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AA6BD;;GAvEQ3B,W;;KAAAA,W;AAyET,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}